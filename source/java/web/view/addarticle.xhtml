<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
                template="../templates/userTemplate1.xhtml">
    <f:metadata>
        <f:viewAction action="#{sessionBean.canVisitPage}"/>
    </f:metadata>
    <ui:define name="content">
        <ui:include src="part_text_localisation/addarticle_rules_#{localizationBean.electLocale}.xhtml" />
        <h:form id="add_article">
            <h:panelGrid columns="2">
                <h:selectBooleanCheckbox id="rulesok" value="#{articleEditBean.rulesok}" required="true">
                    <h:outputLabel value="#{text['input.checkbox.rulesok']}"/>
                </h:selectBooleanCheckbox>
                <rich:message id="mes_rulesok" for="rulesok" />
                <h:panelGroup>
                    <h:outputLabel value="#{text['input.namearticle']}: " />
                    <h:inputTextarea id="namearticle" cols="50" a:maxlength="300" onblur="validnamearticle(this.value)" value="#{articleEditBean.nameArticle}" required="true" requiredMessage="#{text['err.empty']}"/>
                </h:panelGroup>
                <rich:message id="mes_namearticle" for="namearticle" />
            </h:panelGrid>
            <h:inputHidden id="articleid" value="#{articleEditBean.idArticle}"/>
            <rich:editor id="editor" lang="#{articleEditBean.language}" value="#{articleEditBean.value}" style="margin-bottom: 1em">
                <a4j:ajax event="change" render="panel" status="panelUpdateStatus" />
                <a4j:ajax event="dirty" render="panel" status="panelUpdateStatus">
                    <a4j:attachQueue requestDelay="300000" />
                </a4j:ajax>
                <f:facet name="config">
                    toolbar: 'custom',
                    language: '#{articleEditBean.language}',
                    startupFocus: true,
                    toolbar_custom:
                    [
                    { name: 'document', items : [ 'Save','Preview' ] },
                    { name: 'clipboard', items : [ 'Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo' ] },
                    { name: 'editing', items : [ 'Find','Replace','-','SelectAll','-','Scayt' ] },
                    { name: 'insert', items : [ 'Image','Flash','Table','HorizontalRule','Smiley','SpecialChar','PageBreak'
                    ,'Iframe' ] },
                    '/',
                    { name: 'styles', items : [ 'Styles','Format' ] },
                    { name: 'basicstyles', items : [ 'Bold','Italic','Strike','-','RemoveFormat' ] },
                    { name: 'paragraph', items : [ 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote' ] },
                    { name: 'links', items : [ 'Link','Unlink','Anchor' ] },
                    { name: 'tools', items : [ 'Maximize' ] }
                    ]
                </f:facet>
            </rich:editor>
            <rich:messages />
            <rich:panel id="panel" style="background-color: inherit">
                <f:facet name="header">
                    #{articleEditBean.nameArticle}
                    <a4j:status name="panelUpdateStatus">
                        <f:facet name="start">
                            (Updating)
                        </f:facet>
                    </a4j:status>
                </f:facet>
                <h:outputText escape="false" value="#{articleEditBean.value}" />
                <hr style="margin: 0; width: 100%; height: 1px; background: floralwhite; border: none;" />
                Опубліковано: #{sessionBean.userName}
            </rich:panel>
        </h:form>


        <h:form id="t1">
            <a4j:jsFunction name="validnamearticle"  action = "#{articleEditBean.validNameArticleAjax}"  limitRender="true" render="add_article:mes_namearticle">
                <a4j:param name="p1" assignTo="#{articleEditBean.nameArticle}" />
            </a4j:jsFunction>
        </h:form>
    </ui:define>
</ui:composition>
